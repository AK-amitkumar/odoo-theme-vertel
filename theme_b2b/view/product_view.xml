<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="product_public_category_form_view" model="ir.ui.view">
            <field name="name">product.public.category.form.inherited.theme_b2b</field>
            <field name="model">product.public.category</field>
            <field name="inherit_id" ref="website_sale.product_public_category_form_view" />
            <field name="arch" type="xml">
                <field name="name" position="after">
                    <field name="mobile_icon" />
                </field>
            </field>
        </record>
        <template id="product_categories_tree" inherit_id="website_sale.products" active="False" customize_show="True" name="Product Categories Tree">
            <xpath expr="//div[@id='products_grid_before']" position="inside">
                <ul class="nav nav-pills nav-stacked hidden-xs">
                    <li t-att-class=" '' if category else 'active' ">
                        <a t-att-href="keep('/shop',category=0)">All Products</a>
                    </li>
                    <t t-foreach="categories" t-as="c">
                        <t t-call="website_sale.categories_recursive" />
                    </t>
                </ul>
                <ul class="nav nav-pills hidden-lg hidden-md hidden-sm">
                    <li t-att-class=" '' if category else 'active' ">
                        <a t-att-href="keep('/shop',category=0)">All Products</a>
                    </li>
                    <t t-foreach="categories" t-as="c">
                        <t t-call="theme_b2b.categories_recursive_mobile" />
                    </t>
                </ul>
            </xpath>
            <xpath expr="//div[@id='products_grid_before']" position="attributes">
                <attribute name="class">product_categories_tree_div col-md-3 col-xs-12</attribute>
            </xpath>
            <xpath expr="//div[@id='products_grid']" position="attributes">
                <attribute name="class">col-md-9 col-xs-12</attribute>
            </xpath>
        </template>
        <template id="categories_recursive_mobile" name="Category list On Mobile">
            <li t-att-class="'active' if c.id == int(category or 0) else ''">
                <t t-if="c.mobile_icon">
                    <a t-att-href="keep('/shop/category/' + slug(c), category=0)">
                        <i t-att-class="'%s fa-2x' %(c.mobile_icon)" />
                    </a>
                </t>
                <t t-if="not c.mobile_icon">
                    <a t-att-href="keep('/shop/category/' + slug(c), category=0)" t-field="c.name" />
                </t>
            </li>
            <t t-if="c.child_id">
                <t t-foreach="c.child_id" t-as="c">
                    <t t-call="theme_b2b.categories_recursive_mobile" />
                </t>
            </t>
        </template>
        <template id="products_item" inherit_id="website_sale.products_item" name="Product item">
            <xpath expr="//section/h5" position="after">
                <div class="oe_vertel_product_info">
                    <p class="p_desc" t-field="product.description_sale"/>
                </div>
                <p class="text-muted" t-field="product.default_code"/>
            </xpath>
            <xpath expr="//div[@itemprop='offers']" position="after">
                <b t-if="product.qty_available &gt; 0.0" class="" style="color: #1CB807;">
                    I lager
                </b>
                <b t-if="product.qty_available &lt;= 0.0" class="" style="color: #f00;">
                    Ej i lager
                </b>
                <form t-att-action="keep('/shop/cart/update')" class="js_add_cart_variants" t-att-data-attribute_value_ids="product.product_variant_ids.ids" method="POST">
                    <div class="product_shop col-md-12">
                        <input type="hidden" class="product_id" name="product_id" t-att-value="int(product.product_variant_ids[0]) if len(product.product_variant_ids) == 1 else '0'"/>
                        <a class="btn btn-default btn-sm" href="#">MER INFO</a>
                        <input type="text" class="oe_p_qty form-control input-sm" data-min="1" name="add_qty" value="1"/>
                        <a id="add_to_cart" class="btn btn-primary btn-sm js_check_product a-submit" href="#">Buy</a>
                    </div>
                </form>
            </xpath>
        </template>
    </data>
</openerp>
